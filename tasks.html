<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tasks List</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
  <h5 class="text-center text-primary mb-3">Tasks List</h5>
  <div id="taskList"></div>

  <!-- Buttons side by side -->
  <div class="d-flex gap-2 mt-2">
    <button id="clearTasks" class="btn btn-danger btn-1 flex-fill">Clear All Tasks</button>
    <a href="index.html" class="btn btn-info btn-2 flex-fill">Add More</a>
  </div>
</div>

<script>
let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
const save = () => { localStorage.setItem("tasks", JSON.stringify(tasks)); }

function renderTasks(){
  const list = document.getElementById("taskList");
  list.innerHTML = "";
  if(tasks.length === 0){
    list.innerHTML = "<p class='text-muted'>No tasks</p>";
    return;
  }

  tasks.forEach(t => {
    const card = document.createElement("div");
    card.className = "card-item";
    card.innerHTML = `
      <div class="d-flex justify-content-between align-items-start">
        <div>
          <strong>${t.name}</strong>
          <p class="mb-1 text-muted">${t.description || ""}</p>
        </div>
        <button class="delete-btn">&times;</button>
      </div>
      <input type="text" class="form-control form-control-sm mt-1 remark" value="${t.remark}" placeholder="Remarks...">
      <select class="form-select form-select-sm mt-1">
        <option ${t.status==="Pending"?"selected":""}>Pending</option>
        <option ${t.status==="In Progress"?"selected":""}>In Progress</option>
        <option ${t.status==="Done"?"selected":""}>Done</option>
      </select>
      <input type="date" class="form-control form-control-sm mt-1 date" value="${t.date}">
    `;
    
    // Delete
    card.querySelector(".delete-btn").onclick = () => {
      tasks = tasks.filter(x => x.id !== t.id);
      save();
      renderTasks();
    }

    // Edit
    card.querySelector(".remark").oninput = e => { t.remark = e.target.value; save(); }
    card.querySelector("select").onchange = e => { t.status = e.target.value; save(); }
    card.querySelector(".date").onchange = e => { t.date = e.target.value; save(); }

    list.appendChild(card);
  });
}

document.getElementById("clearTasks").onclick = () => { 
  if(confirm("Clear all tasks?")){ tasks = []; save(); renderTasks(); } 
}

renderTasks();
</script>
</body>
</html>
