<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Task & Grocery</title>
<link rel="shortcut icon" href="./image/check.png" type="image/x-icon">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <h5 class="text-center text-success mb-3">Add Task & Grocery</h5>

    <!-- TASK FORM -->
    <div class="mb-4">
        <h6>Task</h6>
        <input id="taskInput" class="form-control mb-2" placeholder="Task name">
        <textarea id="taskDesc" class="form-control mb-2" placeholder="Task description"></textarea>
        <input id="taskRemark" class="form-control mb-2" placeholder="Remarks (optional)">
        <input id="taskDate" type="date" class="form-control mb-2">
        <button id="addTaskBtn" class="btn btn-success w-100 mb-2">Add Task</button>
        <div id="taskMsg" class="alert alert-success" style="display:none;"></div>
    </div>

    <hr>

    <!-- GROCERY FORM -->
    <div class="mb-4">
        <h6>Grocery</h6>
        <input id="groceryInput" class="form-control mb-2" placeholder="Grocery item">
        <input id="groceryRemark" class="form-control mb-2" placeholder="Remarks (optional)">
        <button id="addGroceryBtn" class="btn btn-success w-100 mb-2">Add Grocery</button>
        <div id="groceryMsg" class="alert alert-success" style="display:none;"></div>
    </div>

    <div class="d-flex justify-content-between">
        <a href="tasks.html" class="btn btn-primary">View Tasks</a>
        <a href="groceries.html" class="btn btn-primary">View Groceries</a>
    </div>
</div>

<script>
let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
let groceries = JSON.parse(localStorage.getItem("groceries")) || [];

const save = () => {
    localStorage.setItem("tasks", JSON.stringify(tasks));
    localStorage.setItem("groceries", JSON.stringify(groceries));
}

// Show success message
function showMessage(id, msg){
    const el = document.getElementById(id);
    el.innerText = msg;
    el.style.display="block";
    setTimeout(()=>{ el.style.display="none"; },2000);
}

// Add Task
document.getElementById("addTaskBtn").onclick = () => {
    const name = document.getElementById("taskInput").value.trim();
    if(!name) return alert("Enter task name");
    const desc = document.getElementById("taskDesc").value.trim();
    tasks.push({
        id: Date.now(),
        name,
        description: desc,
        remark: document.getElementById("taskRemark").value,
        date: document.getElementById("taskDate").value || new Date().toISOString().split("T")[0],
        status: "Pending"
    });
    save();
    document.getElementById("taskInput").value="";
    document.getElementById("taskDesc").value="";
    document.getElementById("taskRemark").value="";
    document.getElementById("taskDate").value="";
    showMessage("taskMsg", `Task "${name}" added successfully!`);
}

// Add Grocery
document.getElementById("addGroceryBtn").onclick = () => {
    const name = document.getElementById("groceryInput").value.trim();
    if(!name) return alert("Enter grocery item");
    groceries.push({
        id: Date.now(),
        name,
        remark: document.getElementById("groceryRemark").value,
        status: "Pending"
    });
    save();
    document.getElementById("groceryInput").value="";
    document.getElementById("groceryRemark").value="";
    showMessage("groceryMsg", `Grocery "${name}" added successfully!`);
}
</script>
</body>
</html>
